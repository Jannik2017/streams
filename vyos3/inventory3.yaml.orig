router:
  vars:
    ansible_ssh_common_args: '-o StrictHostKeyChecking=no'
    #-o UserKnownHostsFile=/dev/null'
    ansible_user: vyos
    ansible_network_os: vyos.vyos.vyos

  hosts:
    p3r1v:
      os: "vyos"
      ansible_host: 10.20.30.31
      ansible_hostname: "p3r1v"
      interfaces:
        - interface: lo
          interface_type: loopback
          ipv4_address: 10.3.255.31/32
        - interface: eth0
          interface_type: ethernet
          ipv4_address: dhcp
        - interface: eth1
          interface_type: ethernet
          ipv4_address: dhcp
          mtu: 1400
        - interface: eth3
          interface_type: ethernet
          ipv4_address: 10.3.12.1/24
          mtu: 1400
        - interface: eth4
          interface_type: ethernet
          ipv4_address: 10.3.15.1/24
          mtu: 1400
        - interface: br100
          interface_type: bridge
          ipv4_address: 10.131.0.1/24
          members:
            eth2
            eth5
          mtu: 1400
        - interface: wg0
          interface_type: wireguard
          peers:
            - peer: streampf
              address: 78.47.154.241
              port: 50031
              allowed_ips: 0.0.0.0/0
              public_key: '4pw8bb58iSAbBXrpbqJQQlJI92E0WuSYIYkZF34VpSE='
          port: 50031
          private_key: '8GniHeGIPEakapxfZfw5RXE+NFyreUcN6C1lmy7qAUw='
      policy:
        route_maps:
          - route_map: NACH_EXTERN
            description: 'nach_extern_beigebracht'
            rules:
              - rule: 100
                action: permit
                match: 'local-preference 100'
          - route_map: VON_EXTERN
            description: 'von_extern_gelernt'
            rules:
              - rule: 100
                action: permit
                set: 'local-preference 50'
      bgp:
        router_id: 10.3.255.31
        as: 65003
        #networks:
        neighbors:
          - ipv4_address: 10.3.255.34
            description: p3r4v
            remote_as: 65003
            update_source: lo
          - ipv4_address: 10.3.255.35
            description: p3r5v
            remote_as: 65003
            update_source: lo
          - ipv4_address: 10.3.255.38
            description: p3r8v
            remote_as: 65003
            update_source: lo
          - ipv4_address: 172.17.31.1
            description: streampf
            remote_as: 65009
            update_source: wg0
          - ipv4_address: 192.168.111.44
            description: OPNsense
            remote_as: 65005
            update_source: eth1
            address_family:
              - ipv4_unicast: 'nexthop-self'
                route_maps:
                  route_map_import: 'VON_EXTERN'
                  route_map_export: 'NACH_EXTERN'
      mpls:
        interfaces:
          - interface: eth3
          - interface: eth4
        ldp:
          router_id: 10.3.255.31
          interfaces:
            - interface: lo
            - interface: eth3
            - interface: eth4
      ospf:
        router_id: 10.3.255.31
        v4:
          area: 0
          networks:
            - 10.3.0.0/16
            - 10.131.0.0/24
          #default_information: always
          interfaces:
            - interface: br100
              passive: true
            - interface: eth2
              passive: true
            - interface: eth5
              passive: true
